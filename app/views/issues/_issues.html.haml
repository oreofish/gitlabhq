- if params[:milestone_id] and not params[:milestone_id].empty?
  - milestone = Milestone.find(params[:milestone_id])
  %li{:class => "milestone", :id => dom_id(milestone) }
    .right
      - if milestone.issues.any?
        %span.btn.small.disabled.padded
          = "#{milestone.issues.select{|i| i.closed == false}.count} opened"
        %span.btn.small.disabled.padded
          = "#{milestone.issues.select{|i| i.closed }.count} closed"
      - if can? current_user, :admin_milestone, milestone.project
        = link_to 'Edit', edit_project_milestone_path(milestone.project, milestone), :class => "btn small edit-milestone-link"
    = link_to project_milestone_path(milestone.project, milestone) do
      %h4.row_title
        = truncate(milestone.title, :length => 100)
        %small
          = milestone.expires_at
        .progress.progress-success
          .bar{:style => "width: #{milestone.percent_complete}%;"}

- @issues.each do |issue|
  = render(partial: 'issues/show', locals: {issue: issue})

- if @issues.present?
  %li.bottom
    .row
      .span7= paginate @issues, remote: true, theme: "gitlab"
      .span3.right
        %span.cgray.right
          %span.issue_counter #{@issues.total_count}
          issues for this filter
- else
  %li
    %h4.nothing_here_message Nothing to show here

